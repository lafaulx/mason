"use strict";!function(){var t=function(t,e,i){var n=this;n.parent=t,n.childSelector=e,n.gap=i.gap,n.throttled=i.throttled,n.utils={getPrefixed:function(t){var e,i=document.body.style,n=["ms","O","Moz","Webkit"];if(""===i[t])return t;for(t=t[0].toUpperCase()+t.slice(1),e=n.length;e--;)if(""===i[n[e]+t])return n[e]+t},getComputedStyleNum:function(t,e){return parseInt(getComputedStyle(t)[e],10)}},n.elements,n.colCount,n.timeout,n.init()};t.prototype={init:function(){{var t=this,e=t.parent.querySelectorAll(t.childSelector);t.utils.getPrefixed("transition")}t.elements=[];for(var i=0;i<e.length;i++){var n=e[i],o=t.utils.getComputedStyleNum(n,"height");t.elements.push({el:n,height:o})}window.addEventListener("resize",function(){t.throttled?(clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.onResize()},t.throttled)):t.onResize()},!1),window.dispatchEvent(new Event("resize"))},onResize:function(){var t=this;t.elementWidth=t.utils.getComputedStyleNum(t.elements[0].el,"width");var e=Math.floor((t.utils.getComputedStyleNum(t.parent,"width")+t.gap.x)/(t.elementWidth+t.gap.x));e!==t.colCount&&(t.colCount=e,t.place())},place:function(){for(var t,e=1,i=0,n=[],o=0,l=0;l<this.elements.length;l++){var h=this.elements[l],r=l+1,s=this.getShiftX(i),u=this.getShiftY(r);h.el.style.top=u+"px",h.el.style.left=s+"px",t=n[i],n[i]=(void 0!==t?t:0)+h.height,i++,r>e*this.colCount&&(i===this.colCount||r===this.elements.length)&&e++,i===this.colCount&&(i=0)}for(var a=0;a<n.length;a++){var c=n[a];c>o&&(o=c)}this.parent.style.height=o+(e-1)*this.gap.y+"px"},getShiftX:function(t){return t*(this.elementWidth+this.gap.x)},getShiftY:function(t){for(var e=t>this.colCount?Math.floor((t-1)/this.colCount):0,i=0;e;){var n=t-e*this.colCount-1;i+=this.elements[n].height+this.gap.y,e--}return i}},window.Mason=t}();